(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{43:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(19),l=n.n(c),o=n(23),u=n(11),i=(n(43),n(4)),s=n(5),p=n(6),d=n(7),m=n(2),h=n(18),E=n(25),b="SAVE_USER_EMAIL",f="REQUEST_CURRENCIES_INITIALS",v="RECEIVE_CURRENCIES_INITIALS",j="SAVE_EXPENSE",y="RECEIVE_EXCHANGE_RATES",O="UPDATE_TOTAL_EXPENSES",x="DELETE_EXPENSE",g=function(e){return{type:v,payload:{currencies:e}}},w=function(e){return{type:y,payload:{exchangeRates:e}}},C=function(){return{type:O}},S=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={currency:"BRL"},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.total,a=e.updateTotalExpenses,c=this.state.currency;return a(),r.a.createElement("header",null,r.a.createElement("h4",{"data-testid":"email-field"},t),r.a.createElement("h4",{"data-testid":"total-field"},n),r.a.createElement("span",{"data-testid":"header-currency-field"},c))}}]),n}(a.Component);S.defaultProps={total:0};var k=Object(u.b)((function(e){return{email:e.user.email,total:e.wallet.totalExpenses}}),(function(e){return{updateTotalExpenses:function(){return e(C())}}}))(S),R=n(16),T=n(15),I=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={email:"",password:"",isLoginButtonDisabled:!0},e.validadeInput=function(){var t=e.state,n=t.email,a=t.password,r=/[\d|\w|\\.]+@[\w]+\.[\w]+/i.test(n),c=/[\d|\w]{6,}/i.test(a),l=!r||!c;e.setState({isLoginButtonDisabled:l})},e.handleInputChange=function(t){var n=t.target,a=n.name,r=n.value;e.setState(Object(R.a)({},a,r),(function(){return e.validadeInput()}))},e.handleLogin=function(t){t.preventDefault();var n=Object(T.a)(e),a=n.state.email,r=n.props,c=r.history;(0,r.saveUserEmail)(a),c.push("/carteira")},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,a=e.isLoginButtonDisabled,c=this.handleInputChange,l=this.handleLogin;return r.a.createElement("form",{onSubmit:l},r.a.createElement("input",{type:"email",name:"email",value:t,onChange:c,"data-testid":"email-input"}),r.a.createElement("input",{type:"password",name:"password",value:n,onChange:c,"data-testid":"password-input"}),r.a.createElement("button",{type:"submit",disabled:a},"Entrar"))}}]),n}(a.Component),A=Object(u.b)(null,(function(e){return{saveUserEmail:function(t){return e(function(e){return{type:b,payload:{email:e}}}(t))}}}))(I),D=n(3),_=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).initialExpense={value:0,currency:"USD",description:"",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e.state={expense:e.initialExpense,availableMethods:["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],availableTags:["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"]},e.handleInputChange=function(t){var n=t.target,a=n.name,r=n.value,c=e.state.expense;e.setState({expense:Object(D.a)(Object(D.a)({},c),{},Object(R.a)({},a,r))})},e.handleSubmitExpense=function(t){t.preventDefault();var n=Object(T.a)(e),a=n.state.expense,r=n.props,c=r.savedExpenses,l=r.saveExpense,o=r.fetchRates,u=n.initialExpense;l(Object(D.a)(Object(D.a)({},a),{},{id:c.length})),o(),e.setState({expense:u})},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.state,t=e.expense,n=t.value,a=t.description,c=t.currency,l=t.method,o=t.tag,u=e.availableMethods,i=e.availableTags,s=this.props.currencies,p=this.handleInputChange,d=this.handleSubmitExpense;return r.a.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{type:"number",step:"10",name:"value",value:n,onChange:p,"data-testid":"value-input"}),r.a.createElement("label",{htmlFor:"currency"},"Moeda:",r.a.createElement("select",{id:"currency",name:"currency",value:c,onChange:p},s.map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("select",{name:"method",value:l,onChange:p,"data-testid":"method-input"},u.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("select",{name:"tag",value:o,onChange:p,"data-testid":"tag-input"},i.map((function(e,t){return r.a.createElement("option",{key:t,value:e},e)}))),r.a.createElement("input",{type:"text",name:"description",value:a,onChange:p,"data-testid":"description-input"}),r.a.createElement("button",{type:"submit",onClick:d},"Adicionar despesa"))}}]),n}(a.Component),L=Object(u.b)((function(e){return{currencies:e.wallet.currencies,savedExpenses:e.wallet.expenses}}),(function(e){return{saveExpense:function(t){return e(function(e){return{type:j,payload:{expense:e}}}(t))},fetchRates:function(){return e(function(){var e=Object(E.a)(Object(h.a)().mark((function e(t){var n,a;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"REQUEST_EXCHANGE_RATES"}),e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,t(w(a)),e.abrupt("return",t(C()));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(_),U=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.history;return r.a.createElement("div",null,r.a.createElement("h2",null,"Login"),r.a.createElement(A,{history:e}))}}]),n}(a.Component),B=U,M=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleDeleteButton=function(t){var n=e.props,a=n.deleteExpense,r=n.updateTotalExpenses;a(t),r()},e}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.expenses,t=this.handleDeleteButton;return r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{scope:"col"},"Valor"),r.a.createElement("th",{scope:"col"},"Moeda"),r.a.createElement("th",{scope:"col"},"C\xe2mbio utilizado"),r.a.createElement("th",{scope:"col"},"Moeda de convers\xe3o"),r.a.createElement("th",{scope:"col"},"Valor convertido"),r.a.createElement("th",{scope:"col"},"Tag"),r.a.createElement("th",{scope:"col"},"Descri\xe7\xe3o"),r.a.createElement("th",{scope:"col"},"M\xe9todo de pagamento"),r.a.createElement("th",{scope:"col"},"Editar/Excluir"))),r.a.createElement("tbody",null,e.map((function(e){var n=e.value,a=e.id,c=e.currency,l=e.exchangeRates,o=e.tag,u=e.description,i=e.method,s=(+n).toFixed(2),p=l?l[c].name.split("/Real Brasileiro")[0]:null,d=l?(+l[c].ask).toFixed(2):null,m=l?(n*l[c].ask).toFixed(2):null;return r.a.createElement("tr",{key:a},r.a.createElement("td",null,s),r.a.createElement("td",null,p),r.a.createElement("td",null,d),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,m),r.a.createElement("td",null,o),r.a.createElement("td",null,u),r.a.createElement("td",null,i),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){return t(a)},"data-testid":"delete-btn"},"Excluir")))}))))}}]),n}(a.Component),N=Object(u.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{deleteExpense:function(t){return e(function(e){return{type:x,payload:{id:e}}}(t))},updateTotalExpenses:function(){return e(C())}}}))(M),V=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrenciesInit)()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(k,null),r.a.createElement(L,null),r.a.createElement(N,null))}}]),n}(r.a.Component),F=Object(u.b)(null,(function(e){return{fetchCurrenciesInit:function(){return e(function(){var e=Object(E.a)(Object(h.a)().mark((function e(t){var n,a,r;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:f}),e.next=3,fetch("https://economia.awesomeapi.com.br/json/all");case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,r=Object.keys(a).filter((function(e){return"USDT"!==e})),e.abrupt("return",t(g(r)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}}))(V),P=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return r.a.createElement(m.c,null,r.a.createElement(m.a,{exact:!0,path:"/",component:B}),r.a.createElement(m.a,{path:"/carteira",component:F}))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(13),W=n(33),z=n(34),G={email:""},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;return n===b?{email:a.email}:e},J=n(28),Q={currencies:[],expenses:[],currentExchangeRate:{},totalExpenses:0},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case f:return Object(D.a)({},e);case v:return Object(D.a)(Object(D.a)({},e),{},{currencies:a.currencies});case j:return Object(D.a)(Object(D.a)({},e),{},{expenses:[].concat(Object(J.a)(e.expenses),[a.expense])});case y:return Object(D.a)(Object(D.a)({},e),{},{expenses:[].concat(Object(J.a)(e.expenses.filter((function(t){return t.id!==e.expenses.length-1}))),[Object(D.a)(Object(D.a)({},e.expenses.find((function(t){return t.id===e.expenses.length-1}))),{},{exchangeRates:a.exchangeRates})])});case O:var r=e.expenses.length>0?e.expenses.map((function(e){return e.value*e.exchangeRates[e.currency].ask})).reduce((function(e,t){return e+t})):0;return Object(D.a)(Object(D.a)({},e),{},{totalExpenses:r.toFixed(2)});case x:return Object(D.a)(Object(D.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==a.id}))});default:return e}},q=Object(X.combineReducers)({user:H,wallet:$}),K=Object(X.createStore)(q,Object(z.composeWithDevTools)(Object(X.applyMiddleware)(W.a)));l.a.render(r.a.createElement(o.a,null,r.a.createElement(u.a,{store:K},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[49,1,2]]]);
//# sourceMappingURL=main.024ceee0.chunk.js.map